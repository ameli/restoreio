


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>1. Getting Started &#8212; restoreio Manual</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "auto";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom-pydata.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/toggleprompt.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/custom-pydata.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/custom-pydata.css"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2. Input Data" href="input_data.html" />
    <link rel="prev" title="User Guide" href="user_guide.html" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RCTBMM27GH"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-RCTBMM27GH');
    </script>

    <script defer data-domain="docs.scipy.org" src="https://views.scientific-python.org/js/script.js"></script>

    <!-- My custom JS -->
    <script type="text/javascript" src="../_static/js/custom-pydata.js"></script>

    <!-- Syntax highlighting for BibTex code blocks -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-solarizedlight.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs-bibtex@2.0.1/prism-bibtex.min.js"></script>

    
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">

  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="auto">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../contents.html">
  
  
  
  
    <img src="../_static/images/icons/logo-restoreio-light.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/images/icons/logo-restoreio-dark.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../install.html">
  Install
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="user_guide.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../examples.html">
  Examples
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/ameli/restoreio" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://pypi.org/project/restoreio/" rel="noopener" target="_blank" title="PyPI"><span><i class="fab fa-python"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://anaconda.org/s-ameli/restoreio" rel="noopener" target="_blank" title="Anaconda Cloud"><span><i class="fa fa-circle-notch"></i></span>
            <label class="sr-only">Anaconda Cloud</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://mybinder.org/v2/gh/ameli/restoreio/HEAD?filepath=notebooks%2FInterpolateTraceOfInverse.ipynb" rel="noopener" target="_blank" title="Lanuch Jupyter on Binder"><span><i class="fa fa-chart-line"></i></span>
            <label class="sr-only">Lanuch Jupyter on Binder</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="user_guide.html">
   User Guide
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   1. Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="input_data.html">
   2. Input Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="restore_setting.html">
   3. Data Restoration Settings
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="generating_ensembles.html">
   4. Generating Ensembles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="output_var.html">
   5. Output Variables
  </a>
 </li>
</ul>

    
  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview-of-usage">
   1.1. Overview of Usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#as-a-python-package">
     1.1.1. 1. As a Python Package
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#as-a-standalone-executable">
     1.1.2. 2. As a Standalone Executable
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quick-start">
   1.2. Quick Start
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#restoring-incomplete-data">
     1.2.1. 1. Restoring Incomplete Data
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-python-interface">
       1.2.1.1. Using Python Interface
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-command-line-interface">
       1.2.1.2. Using Command-Line Interface
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#generation-data-ensembles">
     1.2.2. 2. Generation Data Ensembles
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       1.2.2.1. Using Python Interface
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id3">
       1.2.2.2. Using Command-Line Interface
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      

<div class="tocsection editthispage">
    <a href="https://github.com/ameli/restoreio/edit/main/docs/source/user_guide/getting_started.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="getting-started">
<span id="id1"></span><h1><a class="toc-backref" href="#id4" role="doc-backlink"><span class="section-number">1. </span>Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this heading">#</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#getting-started" id="id4">Getting Started</a></p>
<ul>
<li><p><a class="reference internal" href="#overview-of-usage" id="id5">Overview of Usage</a></p></li>
<li><p><a class="reference internal" href="#quick-start" id="id6">Quick Start</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>This user guide offers both a quick overview of package usage and more in-depth details. We recommend starting with the <a class="reference internal" href="#quick-start-sec"><span class="std std-ref">Quick Start</span></a> section and then acquainting yourself with the function arguments detailed in the following sections. You may find it helpful to read this user guide alongside the <a class="reference internal" href="../api.html#api"><span class="std std-ref">API reference</span></a> for a comprehensive understanding.</p>
<section id="overview-of-usage">
<h2><a class="toc-backref" href="#id5" role="doc-backlink"><span class="section-number">1.1. </span>Overview of Usage</a><a class="headerlink" href="#overview-of-usage" title="Permalink to this heading">#</a></h2>
<p>An installation of <span class="synco">restoreio</span> can be used in two ways:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#as-python-package"><span class="std std-ref">As a python package</span></a></p></li>
<li><p><a class="reference internal" href="#as-standalone-exec"><span class="std std-ref">As a standalone executable</span></a></p></li>
</ol>
<section id="as-a-python-package">
<span id="as-python-package"></span><h3><span class="section-number">1.1.1. </span>1. As a Python Package<a class="headerlink" href="#as-a-python-package" title="Permalink to this heading">#</a></h3>
<p>You can import <span class="synco">restoreio</span> in python with <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">restoreio</span></code>. This package contains the following functions:</p>
<ul>
<li><p><a class="reference internal" href="../generated/restoreio.restore.html#restoreio.restore" title="restoreio.restore"><code class="xref py py-func docutils literal notranslate"><span class="pre">restoreio.restore()</span></code></a>: This is the main function of the package which can restore incomplete data, generates ensembles, and performs statistical analysis. You may import this function as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">restoreio</span> <span class="kn">import</span> <span class="n">restore</span>
</pre></div>
</div>
</li>
<li><p><a class="reference internal" href="../generated/restoreio.scan.html#restoreio.scan" title="restoreio.scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">restoreio.scan()</span></code></a>: This function performs a pre-scan of your NetCDF dataset (see <a class="reference internal" href="input_data.html#scan-input-data-sec"><span class="std std-ref">Scan Input Sata</span></a> for more details). You may import this function as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">restoreio</span> <span class="kn">import</span> <span class="n">scan</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="as-a-standalone-executable">
<span id="as-standalone-exec"></span><h3><span class="section-number">1.1.2. </span>2. As a Standalone Executable<a class="headerlink" href="#as-a-standalone-executable" title="Permalink to this heading">#</a></h3>
<p>Alternatively, you may use <span class="synco">restoreio</span> as a standalone executable (outside of python environment) which can be executed in command line. When this package is installed, the following executables will be available on your Python path:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://ameli.github.io/restoreio/cli_restore.html">restore</a>: This executable is equivalent to <a class="reference internal" href="../generated/restoreio.restore.html#restoreio.restore" title="restoreio.restore"><code class="xref py py-func docutils literal notranslate"><span class="pre">restoreio.restore()</span></code></a> function in the Python interface.</p></li>
<li><p><a class="reference external" href="https://ameli.github.io/restoreio/cli_scan.html">restore-scan</a>: This executable is equivalent to <a class="reference internal" href="../generated/restoreio.scan.html#restoreio.scan" title="restoreio.scan"><code class="xref py py-func docutils literal notranslate"><span class="pre">restoreio.scan()</span></code></a> function in the Python interface.</p></li>
</ul>
<p>To use these executables, make sure the <code class="docutils literal notranslate"><span class="pre">/bin</span></code> directory of your python installation is set on your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable. For instance, if your python is installed on <code class="docutils literal notranslate"><span class="pre">/opt/minicinda3/</span></code>, add this path <code class="docutils literal notranslate"><span class="pre">/opt/miniconda3/bin</span></code> directory to <code class="docutils literal notranslate"><span class="pre">PATH</span></code> by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1"><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span>/opt/minicinda/bin:<span class="nv">$PATH</span></span>
</pre></div></div><p>You may place the above line in <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> to make the above change permanently.</p>
</section>
</section>
<section id="quick-start">
<span id="quick-start-sec"></span><h2><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">1.2. </span>Quick Start</a><a class="headerlink" href="#quick-start" title="Permalink to this heading">#</a></h2>
<p><span class="synco">restoreio</span> has two main purposes:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#quick-restore"><span class="std std-ref">Restore incomplete data</span></a>, and</p></li>
<li><p><a class="reference internal" href="#quick-ensemble"><span class="std std-ref">Generate data ensembles</span></a>.</p></li>
</ol>
<p>The function <a class="reference internal" href="../generated/restoreio.restore.html#restoreio.restore" title="restoreio.restore"><code class="xref py py-func docutils literal notranslate"><span class="pre">restoreio.restore()</span></code></a> serves both of the above purposes. In the followings two sections, we demonstrate simple examples on how to use this function for each of these applications.</p>
<section id="restoring-incomplete-data">
<span id="quick-restore"></span><h3><span class="section-number">1.2.1. </span>1. Restoring Incomplete Data<a class="headerlink" href="#restoring-incomplete-data" title="Permalink to this heading">#</a></h3>
<p>The following demonstrates a minimalistic example of restoring the missing data of an HF radar dataset. We provide this example using both the Python interface and command-line interface of <span class="synco">restoreio</span>.</p>
<section id="using-python-interface">
<h4><span class="section-number">1.2.1.1. </span>Using Python Interface<a class="headerlink" href="#using-python-interface" title="Permalink to this heading">#</a></h4>
<p id="quick-code-1">The code below uses the <a class="reference internal" href="../generated/restoreio.restore.html#restoreio.restore" title="restoreio.restore"><code class="xref py py-func docutils literal notranslate"><span class="pre">restoreio.restore()</span></code></a> function in the Python interface of <span class="synco">restoreio</span>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Import package</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">restoreio</span> <span class="kn">import</span> <span class="n">restore</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># OpenDap URL of HF radar data, south side of Martha&#39;s Vineyard</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">input</span> <span class="o">=</span> <span class="s1">&#39;https://transport.me.berkeley.edu/thredds/dodsC/&#39;</span> <span class="o">+</span> \
<span class="gp">... </span>         <span class="s1">&#39;root/MontereyBay/MontereyBay_2km_original.nc&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Specify output</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;/tmp/output.nc&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Specify a time point</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_point</span> <span class="o">=</span> <span class="s1">&#39;2017-01-25T09:00:00&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Restore missing velocity data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">restore</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time_point</span><span class="p">,</span> <span class="n">detect_land</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">fill_coast</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code makes the following plots where you can compare the input data (left column) and output data (right column). Also, the result of the above is an output file called <code class="docutils literal notranslate"><span class="pre">output.nc</span></code> which stores the reconstructed east and north components of the velocity data.</p>
<img alt="../_images/velocities.png" class="custom-dark align-center" src="../_images/velocities.png" />
<p>The above code processed one time point specific by <code class="docutils literal notranslate"><span class="pre">time</span></code> argument. You can, also process a time interval within the input dataset using <code class="docutils literal notranslate"><span class="pre">min_time</span></code> and <code class="docutils literal notranslate"><span class="pre">max_time</span></code> arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Import package</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">restoreio</span> <span class="kn">import</span> <span class="n">restore</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># OpenDap URL of HF radar data, south side of Martha&#39;s Vineyard</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">input</span> <span class="o">=</span> <span class="s1">&#39;https://transport.me.berkeley.edu/thredds/dodsC/&#39;</span> <span class="o">+</span> \
<span class="gp">... </span>         <span class="s1">&#39;root/MontereyBay/MontereyBay_2km_original.nc&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Specify output</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;/tmp/output.nc&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Subsetting time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">min_time</span> <span class="o">=</span> <span class="s1">&#39;2017-01-25T03:00:00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">max_time</span> <span class="o">=</span> <span class="s1">&#39;2017-01-25T09:00:00&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Restore missing velocity data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">restore</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">min_time</span><span class="o">=</span><span class="n">min_time</span><span class="p">,</span> <span class="n">max_time</span><span class="o">=</span><span class="n">max_time</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">detect_land</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>The output file contains reconstructed variables named <code class="docutils literal notranslate"><span class="pre">east_vel</span></code> and <code class="docutils literal notranslate"><span class="pre">north_vel</span></code>. The following reads the output file and prints the variables within the output file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Reading the output file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">netCDF4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span> <span class="o">=</span> <span class="n">netCDF4</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">dict_keys([&#39;time&#39;, &#39;lon&#39;, &#39;lat&#39;, &#39;mask&#39;, &#39;east_vel&#39;, &#39;north_vel&#39;])</span>
</pre></div>
</div>
<p>For more information about the output variables, see <a class="reference internal" href="output_var.html#output-var-sec"><span class="std std-ref">Output Variables</span></a> in this user guide.</p>
</section>
<section id="using-command-line-interface">
<h4><span class="section-number">1.2.1.2. </span>Using Command-Line Interface<a class="headerlink" href="#using-command-line-interface" title="Permalink to this heading">#</a></h4>
<p>The same code above can also be invoked using the <a class="reference external" href="https://ameli.github.io/restoreio/cli_restore.html">restore</a> executable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># OpenDap URL of the dataset</span>
<span class="nv">input</span><span class="o">=</span><span class="s1">&#39;https://transport.me.berkeley.edu/thredds/dodsC/&#39;</span><span class="se">\</span>
<span class="w">        </span><span class="s1">&#39;root/MontereyBay/MontereyBay_2km_original.nc&#39;</span>

<span class="c1"># Specify output</span>
<span class="nv">output</span><span class="o">=</span><span class="s1">&#39;/tmp/output.nc&#39;</span>

<span class="c1"># Subsetting time</span>
<span class="nv">min_time</span><span class="o">=</span><span class="s1">&#39;2017-01-25T03:00:00&#39;</span>
<span class="nv">max_time</span><span class="o">=</span><span class="s1">&#39;2017-01-25T09:00:00&#39;</span>

<span class="c1"># Restore missing velociy data</span>
restore<span class="w"> </span>-i<span class="w"> </span><span class="nv">$input</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">$output</span><span class="w"> </span>--min-time<span class="w"> </span><span class="nv">$min_time</span><span class="w"> </span>--max-time<span class="w"> </span><span class="nv">$max_time</span><span class="w"> </span>-L<span class="w"> </span><span class="m">2</span>
</pre></div>
</div>
</section>
</section>
<section id="generation-data-ensembles">
<span id="quick-ensemble"></span><h3><span class="section-number">1.2.2. </span>2. Generation Data Ensembles<a class="headerlink" href="#generation-data-ensembles" title="Permalink to this heading">#</a></h3>
<p>The second purpose of <a class="reference internal" href="../generated/restoreio.restore.html#restoreio.restore" title="restoreio.restore"><code class="xref py py-func docutils literal notranslate"><span class="pre">restoreio.restore()</span></code></a> function serves to generate ensembles of the velocity data together with restoring the missing data within each generate ensemble. Here we demonstrate its usage both in Python and command-line interface.</p>
<section id="id2">
<h4><span class="section-number">1.2.2.1. </span>Using Python Interface<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Import package</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">restoreio</span> <span class="kn">import</span> <span class="n">restore</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># OpenDap URL of HF radar data, south side of Martha&#39;s Vineyard</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">input</span> <span class="o">=</span> <span class="s1">&#39;https://transport.me.berkeley.edu/thredds/dodsC/&#39;</span> <span class="o">+</span> \
<span class="gp">... </span>         <span class="s1">&#39;root/MontereyBay/MontereyBay_2km_original.nc&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Specify output</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;/tmp/output.nc&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Subsetting spatial domain to the Monterey Bay region, California</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">min_lon</span> <span class="o">=</span> <span class="o">-</span><span class="mf">122.344</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">max_lon</span> <span class="o">=</span> <span class="o">-</span><span class="mf">121.781</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">min_lat</span> <span class="o">=</span> <span class="mf">36.507</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">max_lat</span> <span class="o">=</span> <span class="mf">36.992</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Specify a time point</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_point</span> <span class="o">=</span> <span class="s1">&#39;2017-01-25T09:00:00&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Generate ensembles and reconstruct gaps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">restore</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">min_lon</span><span class="o">=</span><span class="n">min_lon</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">max_lon</span><span class="o">=</span><span class="n">max_lon</span><span class="p">,</span> <span class="n">min_lat</span><span class="o">=</span><span class="n">min_lat</span><span class="p">,</span> <span class="n">max_lat</span><span class="o">=</span><span class="n">max_lat</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">time</span><span class="o">=</span><span class="n">time_point</span><span class="p">,</span> <span class="n">uncertainty_quant</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">num_ensembles</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">ratio_num_modes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">kernel_width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">scale_error</span><span class="o">=</span><span class="mf">0.08</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">detect_land</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill_coast</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">write_ensembles</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>In the above code, we subset the data to the Monterey Bay region in California. The above code generates 2000 ensembles of the velocity data. You may refer to <a class="reference internal" href="generating_ensembles.html#generating-ensembles"><span class="std std-ref">Generating Ensembles</span></a> for more details. The mean and standard deviation of the ensembles are shown in the left and right panels of the figure below.</p>
<img alt="../_images/ensembles1.png" class="custom-dark align-center" src="../_images/ensembles1.png" />
<p>The output file contains the mean of the reconstructed ensembles under the names <code class="docutils literal notranslate"><span class="pre">east_vel</span></code> and <code class="docutils literal notranslate"><span class="pre">north_vel</span></code>. Also, the mean and standard deviation of the ensembles are stored under the names <code class="docutils literal notranslate"><span class="pre">east_err</span></code> and <code class="docutils literal notranslate"><span class="pre">north_err</span></code>. All ensembles are stored by the variables <code class="docutils literal notranslate"><span class="pre">east_vel_ensembles</span></code> and <code class="docutils literal notranslate"><span class="pre">north_vel_ensembles</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Reading the output file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">netCDF4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span> <span class="o">=</span> <span class="n">netCDF4</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nc</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">dict_keys([&#39;time&#39;, &#39;lon&#39;, &#39;lat&#39;, &#39;mask&#39;, &#39;east_vel&#39;, &#39;north_vel&#39;, &#39;east_err&#39;,</span>
<span class="go">&#39;north_err&#39;, &#39;east_vel_ensembles&#39;, &#39;north_vel_ensembles&#39;])</span>
</pre></div>
</div>
</section>
<section id="id3">
<h4><span class="section-number">1.2.2.2. </span>Using Command-Line Interface<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h4>
<p>The same code above can also be invoked using the <a class="reference external" href="https://ameli.github.io/restoreio/cli_restore.html">restore</a> executable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># OpenDap URL of the dataset</span>
<span class="nv">input</span><span class="o">=</span><span class="s1">&#39;https://transport.me.berkeley.edu/thredds/dodsC/&#39;</span><span class="se">\</span>
<span class="w">        </span><span class="s1">&#39;root/MontereyBay/MontereyBay_2km_original.nc&#39;</span>

<span class="c1"># Specify output</span>
<span class="nv">output</span><span class="o">=</span><span class="s1">&#39;/tmp/output.nc&#39;</span>

<span class="c1"># Subsetting spatial domain to the Monterey Bay region, California</span>
<span class="nv">min_lon</span><span class="o">=</span>-122.344
<span class="nv">max_lon</span><span class="o">=</span>-121.781
<span class="nv">min_lat</span><span class="o">=</span><span class="m">36</span>.507
<span class="nv">max_lat</span><span class="o">=</span><span class="m">36</span>.992

<span class="c1"># Specifying a time point</span>
<span class="nv">time_point</span><span class="o">=</span><span class="s1">&#39;2017-01-25T03:00:00&#39;</span>

<span class="c1"># Restore missing velociy data</span>
restore<span class="w"> </span>-i<span class="w"> </span><span class="nv">$input</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">$output</span><span class="w"> </span>--min-lon<span class="w"> </span><span class="nv">$min_lon</span><span class="w"> </span>--max-lon<span class="w"> </span><span class="nv">$max_lon</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--min-lat<span class="w"> </span><span class="nv">$min_lat</span><span class="w"> </span>--max-lat<span class="w"> </span><span class="nv">$max_lat</span><span class="w"> </span>--time<span class="w"> </span><span class="nv">$time_point</span><span class="w"> </span>-L<span class="w"> </span><span class="m">2</span><span class="w"> </span>-l<span class="w"> </span><span class="se">\</span>
<span class="w">        </span>-u<span class="w"> </span>-e<span class="w"> </span><span class="m">2000</span><span class="w"> </span>-m<span class="w"> </span><span class="m">1</span><span class="w"> </span>-w<span class="w"> </span><span class="m">5</span><span class="w"> </span>-E<span class="w"> </span><span class="m">0</span>.08<span class="w"> </span>-W
</pre></div>
</div>
</section>
</section>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="user_guide.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">User Guide</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="input_data.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title"><span class="section-number">2. </span>Input Data</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>


    <!-- Adobe Embed API -->
    
    <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>


  </body>
</html>