


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta property="og:title" content="restoreio.restore" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ameli.github.io/api/generated/restoreio.restore.html" />
<meta property="og:site_name" content="RestoreIO" />
<meta property="og:image" content="https://restoreio.org/public/images/card.png" />
<meta property="og:image:alt" content="RestoreIO" />
<meta property="og:title" content="RestoreIO">
<meta property="og:description" content="RestoreIO is a Python package to restore incomplete oceanographic datasets and generate data ensembles, allowing Lagrangian analysis and uncertainty qualification on such datasets.">

    <title>restoreio.restore &#8212; restoreio Manual</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "auto";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom-pydata.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/toggleprompt.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/custom-pydata.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/custom-pydata.css"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="restoreio.scan" href="restoreio.scan.html" />
    <link rel="prev" title="API Reference" href="../api.html" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RCTBMM27GH"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-RCTBMM27GH');
    </script>

    <script defer data-domain="docs.scipy.org" src="https://views.scientific-python.org/js/script.js"></script>

    <!-- My custom JS -->
    <script type="text/javascript" src="../_static/js/custom-pydata.js"></script>

    <!-- Syntax highlighting for BibTex code blocks -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism-solarizedlight.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs-bibtex@2.0.1/prism-bibtex.min.js"></script>

    
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">

  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="auto">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../contents.html">
  
  
  
  
    <img src="../../_static/images/icons/logo-restoreio-light.png" class="logo__image only-light" alt="Logo image">
    <img src="../../_static/images/icons/logo-restoreio-dark.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../install/install.html">
  Install
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../user_guide/user_guide.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../api.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../examples.html">
  Examples
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/ameli/restoreio" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://pypi.org/project/restoreio/" rel="noopener" target="_blank" title="PyPI"><span><i class="fab fa-python"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://anaconda.org/s-ameli/restoreio" rel="noopener" target="_blank" title="Anaconda Cloud"><span><i class="fa fa-circle-notch"></i></span>
            <label class="sr-only">Anaconda Cloud</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://restoreio.org" rel="noopener" target="_blank" title="Online RestoreIO Platform"><span><i class="fas fa-globe-americas"></i></span>
            <label class="sr-only">Online RestoreIO Platform</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Functions
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   restoreio.restore
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="restoreio.scan.html">
   restoreio.scan
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../cli_restore.html">
   restore
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../cli_scan.html">
   restore-scan
  </a>
 </li>
</ul>

    
  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#restoreio.restore">
   <code class="docutils literal notranslate">
    <span class="pre">
     restore()
    </span>
   </code>
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      

<div class="tocsection editthispage">
    <a href="https://github.com/ameli/restoreio/edit/main/docs/source/api/generated/restoreio.restore.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="restoreio-restore">
<h1>restoreio.restore<a class="headerlink" href="#restoreio-restore" title="Permalink to this heading">#</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="restoreio.restore">
<span class="sig-prename descclassname"><span class="pre">restoreio.</span></span><span class="sig-name descname"><span class="pre">restore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_file_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_file_index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_lon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_lat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diffusivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sweep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detect_land</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_coast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convex_hull</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refine_grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uncertainty_quant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_ensembles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio_num_modes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.08</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">write_ensembles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#restoreio.restore" title="Permalink to this definition">#</a></dt>
<dd><p>Restore incomplete oceanographic dataset and generate data ensembles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>input</strong><span class="classifier">str</span></dt><dd><p>Input filename. This can be either the path to a local file or the url
to a remote dataset. The file extension should be <code class="docutils literal notranslate"><span class="pre">.nc</span></code> or <code class="docutils literal notranslate"><span class="pre">.ncml</span></code>.</p>
</dd>
<dt><strong>min_file_index</strong><span class="classifier">str, default=’’</span></dt><dd><p>Start file iterator to be used for processing multiple input files. For
Instance, setting <code class="docutils literal notranslate"><span class="pre">input=input</span></code>, <code class="docutils literal notranslate"><span class="pre">min_file_index=003</span></code>, and
<code class="docutils literal notranslate"><span class="pre">max_file_index=012</span></code> means to read the series of input files with
iterators <code class="docutils literal notranslate"><span class="pre">input003.nc</span></code>, <code class="docutils literal notranslate"><span class="pre">input004.nc</span></code>, to <code class="docutils literal notranslate"><span class="pre">input012.nc</span></code>. If this
option is used, the option <code class="docutils literal notranslate"><span class="pre">max_file_index</span></code> should also be given.</p>
</dd>
<dt><strong>max_file_index</strong><span class="classifier">str, default=’’</span></dt><dd><p>Start file iterator to be used for processing multiple input files. For
Instance, setting <code class="docutils literal notranslate"><span class="pre">input=input</span></code>, <code class="docutils literal notranslate"><span class="pre">min_file_index=003</span></code>, and
<code class="docutils literal notranslate"><span class="pre">max_file_index=012</span></code> means to read the series of input files with
iterators <code class="docutils literal notranslate"><span class="pre">input003.nc</span></code>, <code class="docutils literal notranslate"><span class="pre">input004.nc</span></code>, to <code class="docutils literal notranslate"><span class="pre">input012.nc</span></code>. If this
option is used, the option <code class="docutils literal notranslate"><span class="pre">min_file_index</span></code> should also be given.</p>
</dd>
<dt><strong>output</strong><span class="classifier">str</span></dt><dd><p>Output filename. This can be either the path to a local file or the url
to a remote dataset. The file extension should be <code class="docutils literal notranslate"><span class="pre">.nc</span></code> or <code class="docutils literal notranslate"><span class="pre">.ncml</span></code>
only. If no output file is provided, the output filename is constructed
by adding the word <code class="docutils literal notranslate"><span class="pre">_restored</span></code> at the end of the input filename.</p>
</dd>
<dt><strong>min_lon</strong><span class="classifier">float, default=float(‘nan’)</span></dt><dd><p>Minimum longitude in the unit of degrees to subset the processing
domain. If not provided or set to <cite>float(‘nan’)</cite>, the minimum longitude
of the input data is considered.</p>
</dd>
<dt><strong>max_lon</strong><span class="classifier">float, default=float(‘nan’)</span></dt><dd><p>Maximum longitude in the unit of degrees to subset the processing
domain. If not provided or set to <cite>float(‘nan’)</cite>, the maximum longitude
of the input data is considered.</p>
</dd>
<dt><strong>min_lat</strong><span class="classifier">float, default=float(‘nan’)</span></dt><dd><p>Minimum latitude in the unit of degrees to subset the processing
domain. If not provided or set to <cite>float(‘nan’)</cite>, the minimum latitude
of the input data is considered.</p>
</dd>
<dt><strong>max_lat</strong><span class="classifier">float, default: float(‘nan’)</span></dt><dd><p>Maximum latitude in the unit of degrees to subset the processing
domain. If not provided or set to <cite>float(‘nan’)</cite>, the maximum latitude
of the input data is considered.</p>
</dd>
<dt><strong>min_time</strong><span class="classifier">str, default=’’</span></dt><dd><p>The start of the time interval within the dataset times to be
processed. The time should be provided as a string with the format
<code class="docutils literal notranslate"><span class="pre">'yyyy-mm-ddTHH:MM:SS'</span></code> where <code class="docutils literal notranslate"><span class="pre">yyyy</span></code> is year, <code class="docutils literal notranslate"><span class="pre">mm</span></code> is month,
<code class="docutils literal notranslate"><span class="pre">dd</span></code> is day, <code class="docutils literal notranslate"><span class="pre">HH</span></code> is hour from <cite>00</cite> to <cite>23</cite>, <code class="docutils literal notranslate"><span class="pre">MM</span></code> is minutes and
<code class="docutils literal notranslate"><span class="pre">SS</span></code> is seconds. If the given time does not exactly match any time in
the dataset, the closest data time is used. If this argument is not
given, the earliest available time in the dataset is used. Note that
specifying a time interval cannot be used together with uncertainty
quantification (using argument <code class="docutils literal notranslate"><span class="pre">uncertainty_quant=True</span></code>). For this
case, use <code class="docutils literal notranslate"><span class="pre">time</span></code> argument instead which specifies a single time
point.</p>
</dd>
<dt><strong>max_time</strong><span class="classifier">str, default=’’</span></dt><dd><p>The end of the time interval within the dataset times to be
processed. The time should be provided as a string with the format
<code class="docutils literal notranslate"><span class="pre">'yyyy-mm-ddTHH:MM:SS'</span></code> where <code class="docutils literal notranslate"><span class="pre">yyyy</span></code> is year, <code class="docutils literal notranslate"><span class="pre">mm</span></code> is month,
<code class="docutils literal notranslate"><span class="pre">dd</span></code> is day, <code class="docutils literal notranslate"><span class="pre">HH</span></code> is hour from <cite>00</cite> to <cite>23</cite>, <code class="docutils literal notranslate"><span class="pre">MM</span></code> is minutes and
<code class="docutils literal notranslate"><span class="pre">SS</span></code> is seconds. If the given time does not exactly match any time in
the dataset, the closest data time is used. If this argument is not
given, the latest available time in the dataset is used. Note that
specifying a time interval cannot be used together with uncertainty
quantification (using argument <code class="docutils literal notranslate"><span class="pre">uncertainty_quant=True</span></code>). For this
case, use <code class="docutils literal notranslate"><span class="pre">time</span></code> argument instead which specifies a single time
point.</p>
</dd>
<dt><strong>time</strong><span class="classifier">str, default=’’</span></dt><dd><p>Specify a single time point to process. The time should be provided as
a string with the format <code class="docutils literal notranslate"><span class="pre">'yyyy-mm-ddTHH:MM:SS'</span></code> where <code class="docutils literal notranslate"><span class="pre">yyyy</span></code> is
year, <code class="docutils literal notranslate"><span class="pre">mm</span></code> is month, <code class="docutils literal notranslate"><span class="pre">dd</span></code> is day, <code class="docutils literal notranslate"><span class="pre">HH</span></code> is hour from <cite>00</cite> to <cite>23</cite>,
<code class="docutils literal notranslate"><span class="pre">MM</span></code> is minutes and <code class="docutils literal notranslate"><span class="pre">SS</span></code> is seconds. If the given time does not
exactly match any time in the dataset, the closest data time is used.
If this option is not given, the latest available time in the dataset
is used. This option sets both <code class="docutils literal notranslate"><span class="pre">min_time</span></code> and <code class="docutils literal notranslate"><span class="pre">max_time</span></code> to this
given time value. The argument is useful when performing uncertainty
quantification (using argument <code class="docutils literal notranslate"><span class="pre">uncertainty_quant=True</span></code>) or plotting
(using argument <code class="docutils literal notranslate"><span class="pre">plot=True</span></code>) as these require a single time, rather
than a time interval. In contrary, to specify a time interval, use
<code class="docutils literal notranslate"><span class="pre">min_time</span></code> and <code class="docutils literal notranslate"><span class="pre">max_time</span></code> arguments.</p>
</dd>
<dt><strong>diffusivity</strong><span class="classifier">float, default=20</span></dt><dd><p>Diffusivity of the PDE solver (real number). Large number leads to
diffusion dominant solution. Small numbers leads to advection dominant
solution.</p>
</dd>
<dt><strong>sweep</strong><span class="classifier">bool, default=False</span></dt><dd><p>Sweeps the image data in all flipped directions. This ensures an even
solution independent of direction.</p>
</dd>
<dt><strong>detect_land</strong><span class="classifier">int, default=2</span></dt><dd><p>Detect land and exclude it from ocean’s missing data points. This
option should be a boolean or an integer with the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">False</span></code>: Same as <code class="docutils literal notranslate"><span class="pre">0</span></code>. See below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">True</span></code>: Same as <code class="docutils literal notranslate"><span class="pre">2</span></code>. See below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code>: Does not detect land from ocean. All land points are assumed
to be a part of ocean’s missing points.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code>: Detect land. Most accurate, slowest.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">2</span></code>: Detect land. Less accurate, fastest (preferred method).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code>: Detect land. Currently this option is not fully implemented.</p></li>
</ul>
</dd>
<dt><strong>fill_coast</strong><span class="classifier">bool, default=False</span></dt><dd><p>Fills the gap the between the data in the ocean and between ocean and
the coastline. This option is only effective if <code class="docutils literal notranslate"><span class="pre">detect_land</span></code> is not
set to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd>
<dt><strong>convex_hull</strong><span class="classifier">bool, default=False</span></dt><dd><p>Instead of using the concave hull (alpha shape) around the data points,
this options uses convex hull of the area around the data points.</p>
</dd>
<dt><strong>alpha</strong><span class="classifier">float, default=20</span></dt><dd><p>The alpha number for alpha shape. If not specified or a negative
number, this value is computed automatically. This option is only
relevant to concave shapes. This option is ignored if convex shape is
used with <code class="docutils literal notranslate"><span class="pre">convex_hull=True</span></code>.</p>
</dd>
<dt><strong>refine_grid</strong><span class="classifier">int, default=1</span></dt><dd><p>Refines the grid by increasing the number of points on each axis by a
multiple of a given integer. If this option is set to <cite>1</cite>, no
refinement is performed. If set to integer n, the number of grid points
is refined by <span class="math notranslate nohighlight">\(n^2\)</span> times (that is, <span class="math notranslate nohighlight">\(n\)</span> times on each
axis).</p>
</dd>
<dt><strong>uncertainty_quant</strong><span class="classifier">bool, default=False</span></dt><dd><p>Performs uncertainty quantification on the data for the time frame
given by <code class="docutils literal notranslate"><span class="pre">time</span></code> option.</p>
</dd>
<dt><strong>num_ensembles</strong><span class="classifier">int, default=1000</span></dt><dd><p>Number of ensembles used for uncertainty quantification. This option is
relevant if <code class="docutils literal notranslate"><span class="pre">uncertainty_quant</span></code> is set to <cite>True</cite>.</p>
</dd>
<dt><strong>ratio_num_modes</strong><span class="classifier">int, default=1.0</span></dt><dd><p>Ratio of the number of KL eigen-modes to be used in the truncation of
the KL expansion. The ratio is defined by the number of modes to be
used over the total number of modes. The ratio is a number between 0
and 1. For instance, if set to 1, all modes are used, hence the KL
expansion is not truncated. If set to 0.5, half of the number of modes
are used. This option is relevant if <code class="docutils literal notranslate"><span class="pre">uncertainty_quant</span></code> is set to
<cite>True</cite>.</p>
</dd>
<dt><strong>kernel_width</strong><span class="classifier">int, default=5</span></dt><dd><p>Window of the kernel to estimate covariance of data. The window width
should be given by the integer number of pixels (data points). The
non-zero extent of the kernel a square area with twice the window
length in both longitude and latitude directions. This option is
relevant if <code class="docutils literal notranslate"><span class="pre">uncertainty_quant</span></code> is set to <cite>True</cite>.</p>
</dd>
<dt><strong>scale_error</strong><span class="classifier">float, default=0.08</span></dt><dd><p>Scale velocity error of the input data by a factor. Often, the input
velocity error is the dimensionless GDOP which needs to be scaled by
the standard deviation of the velocity error to represent the actual
velocity error. This value scales the error. This option is relevant if
<code class="docutils literal notranslate"><span class="pre">uncertainty_quant</span></code> is set to <cite>True</cite>.</p>
</dd>
<dt><strong>write_ensembles</strong><span class="classifier">bool, default=False,</span></dt><dd><p>If <cite>True</cite>, all generated ensembles will be written to the output file.
This option is relevant if <code class="docutils literal notranslate"><span class="pre">uncertainty_quant</span></code> is set to <cite>True</cite>.</p>
</dd>
<dt><strong>plot</strong><span class="classifier">bool, default=False</span></dt><dd><p>Plots the results. In this case, instead of iterating through all time
frames, only one time frame (given with option <code class="docutils literal notranslate"><span class="pre">timeframe</span></code>) is
restored and plotted. If in addition, the uncertainty quantification is
enabled (with option <code class="docutils literal notranslate"><span class="pre">uncertainty_quant=True</span></code>), the statistical
analysis for the given time frame is also plotted.</p>
</dd>
<dt><strong>save</strong><span class="classifier">bool, default=True</span></dt><dd><p>If <cite>True</cite>, the plots are not displayed, rather are saved in the current
directory as <code class="docutils literal notranslate"><span class="pre">.pdf</span></code> and <code class="docutils literal notranslate"><span class="pre">.svg</span></code> format. This option is useful when
executing this script in an environment without display (such as remote
cluster). If <cite>False</cite>, the generated plots will be displayed.</p>
</dd>
<dt><strong>verbose</strong><span class="classifier">bool, default=False</span></dt><dd><p>If <cite>True</cite>, prints verbose information during the computation process.</p>
</dd>
<dt><strong>terminate ; bool, default=False</strong></dt><dd><p>If <cite>True</cite>, on encountering errors, the program both raises error and
exists with code 1 with printing the message starting with the keyword
<code class="docutils literal notranslate"><span class="pre">ERROR</span></code>. This is useful when this package is executed on a server
to pass exit signals to a Node application. On the downside, this
option causes an interactive python environment to both terminate the
script and the python environment itself. To avoid this, set this
option to <cite>False</cite>. In this case, upon an error, the <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is
raised, which cases the script to terminate, however, an interactive
python environment will not be exited.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="restoreio.scan.html#restoreio.scan" title="restoreio.scan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">restoreio.scan</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p><strong>Output File:</strong></p>
<p>The output is a NetCDF file in <code class="docutils literal notranslate"><span class="pre">.nc</span></code> format containing a selection of the
following variables, contingent on the chosen configuration:</p>
<ol class="arabic simple">
<li><p>Mask</p></li>
<li><p>Reconstructed East and North Velocities</p></li>
<li><p>East and North Velocity Errors</p></li>
<li><p>East and North Velocity Ensembles</p></li>
</ol>
<p><strong>1. Mask:</strong></p>
<p>The mask variable is a three-dimensional array with dimensions for <em>time</em>,
<em>longitude</em>, and <em>latitude</em>. This variable is stored under the name
<code class="docutils literal notranslate"><span class="pre">mask</span></code> in the output file.</p>
<p><strong>Interpreting Mask Variable over Segmented Domains:</strong></p>
<p>The mask variable includes information about the result of domain
segmentation. This array contains integer values <code class="docutils literal notranslate"><span class="pre">-1</span></code>, <code class="docutils literal notranslate"><span class="pre">0</span></code>, <code class="docutils literal notranslate"><span class="pre">1</span></code>, and
<code class="docutils literal notranslate"><span class="pre">2</span></code> that are interpreted as follows:</p>
<ul class="simple">
<li><p>The value <code class="docutils literal notranslate"><span class="pre">-1</span></code> indicates the location is identified to be on the
<strong>land</strong> domain <span class="math notranslate nohighlight">\(\Omega_l\)</span>. In these locations, the output
velocity variable is masked.</p></li>
<li><p>The value <code class="docutils literal notranslate"><span class="pre">0</span></code> indicates the location is identified to be on the
<strong>known</strong> domain <span class="math notranslate nohighlight">\(\Omega_k\)</span>. These locations have velocity data in
the input file. The same velocity values are preserved in the output
file.</p></li>
<li><p>The value <code class="docutils literal notranslate"><span class="pre">1</span></code> indicates the location is identified to be on the
<strong>missing</strong> domain <span class="math notranslate nohighlight">\(\Omega_m\)</span>. These locations do not have a
velocity data in the input file, but they do have a reconstructed
velocity data on the output file.</p></li>
<li><p>The value <code class="docutils literal notranslate"><span class="pre">2</span></code> indicates the location is identified to be on the
<strong>ocean</strong> domain <span class="math notranslate nohighlight">\(\Omega_o\)</span>. In these locations, the output
velocity variable is masked.</p></li>
</ul>
<p><strong>2. Reconstructed East and North Velocities:</strong></p>
<p>The reconstructed east and north velocity variables are stored in the
output file under the names <code class="docutils literal notranslate"><span class="pre">east_vel</span></code> and <code class="docutils literal notranslate"><span class="pre">north_vel</span></code>, respectively.
These variables are three-dimensional arrays with dimensions for <em>time</em>,
<em>longitude</em>, and <em>latitude</em>.</p>
<p><strong>Interpreting Velocity Variables over Segmented Domains:</strong></p>
<p>The velocity variables on each of the segmented domains are defined as
follows:</p>
<ul class="simple">
<li><p>On locations where the <code class="docutils literal notranslate"><span class="pre">mask</span></code> value is <code class="docutils literal notranslate"><span class="pre">-1</span></code> or <code class="docutils literal notranslate"><span class="pre">2</span></code>, the output
velocity variables are masked.</p></li>
<li><p>On locations where the <code class="docutils literal notranslate"><span class="pre">mask</span></code> value is <code class="docutils literal notranslate"><span class="pre">0</span></code>, the output velocity
variables have the same values as the corresponding variables in the
input file.</p></li>
<li><p>On locations where the <code class="docutils literal notranslate"><span class="pre">mask</span></code> value is <code class="docutils literal notranslate"><span class="pre">1</span></code>, the output velocity
variables are reconstructed. If the <code class="docutils literal notranslate"><span class="pre">uncertainty_quant</span></code> is enabled,
these output velocity variables are obtained by the <em>mean</em> of the
velocity ensembles, where the missing domain of each ensemble is
reconstructed.</p></li>
</ul>
<p><strong>3. East and North Velocity Errors:</strong></p>
<p>If the <code class="docutils literal notranslate"><span class="pre">uncertainty_quant</span></code> option is enabled, the east and north velocity
error variables will be included in the output file under the names
<code class="docutils literal notranslate"><span class="pre">east_err</span></code> and <code class="docutils literal notranslate"><span class="pre">north_err</span></code>, respectively. These variables are
three-dimensional arrays with dimensions for <em>time</em>, <em>longitude</em>, and
<em>latitude</em>.</p>
<p><strong>Interpreting Velocity Error Variable over Segmented Domains:</strong></p>
<p>The velocity error variables on each of the segmented domains are defined
as follows:</p>
<ul class="simple">
<li><p>On locations where the <code class="docutils literal notranslate"><span class="pre">mask</span></code> value is <code class="docutils literal notranslate"><span class="pre">-1</span></code> or <code class="docutils literal notranslate"><span class="pre">2</span></code>, the output
velocity error variables are masked.</p></li>
<li><p>On locations where the <code class="docutils literal notranslate"><span class="pre">mask</span></code> value is <code class="docutils literal notranslate"><span class="pre">0</span></code>, the output velocity error
variables are obtained from either the corresponding velocity error or
GDOP variables in the input file scaled by the value of <code class="docutils literal notranslate"><span class="pre">scale_error</span></code>.</p></li>
<li><p>On locations where the <code class="docutils literal notranslate"><span class="pre">mask</span></code> value is <code class="docutils literal notranslate"><span class="pre">1</span></code>, the output velocity error
variables are obtained from the <em>standard deviation</em> of the ensembles,
where the missing domain of each ensemble is reconstructed.</p></li>
</ul>
<p><strong>4. East and North Velocity Ensembles:</strong></p>
<p>When you activate the <code class="docutils literal notranslate"><span class="pre">uncertainty_quant</span></code> option, a collection of
velocity field ensembles is created. Yet, by default, the output file only
contains the mean and standard deviation of these ensembles. To incorporate
all ensembles into the output file, you should additionally enable the
<code class="docutils literal notranslate"><span class="pre">write_ensembles</span></code> option. This action saves the east and north velocity
ensemble variables in the output file as <code class="docutils literal notranslate"><span class="pre">east_vel_ensembles</span></code> and
<code class="docutils literal notranslate"><span class="pre">north_vel_ensembles</span></code>, respectively. These variables are four-dimensional
arrays with dimensions for <em>ensemble</em>, <em>time</em>, <em>longitude</em>, and
<em>latitude</em>.</p>
<p>The <em>ensemble</em> dimension of the array has the size <span class="math notranslate nohighlight">\(s+1\)</span> where
<span class="math notranslate nohighlight">\(s\)</span> is the number of ensembles specified by <code class="docutils literal notranslate"><span class="pre">num_ensembles</span></code>
argument.. The first ensemble with the index <span class="math notranslate nohighlight">\(0\)</span> corresponds to the
original input dataset. The other ensembles with the indices
<span class="math notranslate nohighlight">\(1, \dots, s\)</span> correspond to the generated ensembles.</p>
<p><strong>Interpreting Velocity Ensemble Variables over Segmented Domains:</strong></p>
<p>The velocity ensemble variables on each of the segmented domains are
defined similar to those presented for velocity velocities. In particular,
the missing domain of each ensemble is reconstructed independently.</p>
<p><strong>Mean and Standard Deviation of Ensembles:</strong></p>
<p>Note that the <em>mean</em> and <em>standard deviation</em> of the velocity ensemble
arrays over the ensemble dimension yield the velocity and velocity error
variables, respectively.</p>
<p class="rubric">Examples</p>
<p><strong>Restoring Data:</strong></p>
<p>The following code is a minimalistic example of restoring the missing data
of an HF radar dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Import package</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">restoreio</span> <span class="kn">import</span> <span class="n">restore</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># OpenDap URL of HF radar data, south side of Martha&#39;s Vineyard</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">input</span> <span class="o">=</span> <span class="s1">&#39;https://transport.me.berkeley.edu/thredds/dodsC/&#39;</span> <span class="o">+</span> \
<span class="gp">... </span>        <span class="s1">&#39;root/WHOI-HFR/WHOI_HFR_2014_original.nc&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Subsetting time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">min_time</span> <span class="o">=</span> <span class="s1">&#39;2014-07-01T20:00:00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">max_time</span> <span class="o">=</span> <span class="s1">&#39;2014-07-03T20:00:00&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Specify output</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;output.nc&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Restore missing velocity data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">restore</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">min_time</span><span class="o">=</span><span class="n">min_time</span><span class="p">,</span> <span class="n">max_time</span><span class="o">=</span><span class="n">max_time</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">detect_land</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill_coast</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">convex_hull</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">alpha</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Ensemble Generation:</strong></p>
<p>The following code is an example of generating ensembles for an HF radar
dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Import package</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">restoreio</span> <span class="kn">import</span> <span class="n">restore</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># OpenDap URL of HF radar data, US west coast</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://hfrnet-tds.ucsd.edu/thredds/dodsC/HFR/USWC/2km/&#39;</span> <span class="o">+</span> \
<span class="gp">... </span>      <span class="s1">&#39;hourly/RTV/HFRADAR_US_West_Coast_2km_Resolution_Hou&#39;</span> <span class="o">+</span> \
<span class="gp">... </span>      <span class="s1">&#39;rly_RTV_best.ncd&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Subsetting spatial domain to the Monterey Bay region, California</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">min_lon</span> <span class="o">=</span> <span class="o">-</span><span class="mf">122.344</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">max_lon</span> <span class="o">=</span> <span class="o">-</span><span class="mf">121.781</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">min_lat</span> <span class="o">=</span> <span class="mf">36.507</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">max_lat</span> <span class="o">=</span> <span class="mf">36.992</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Time subsetting</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_point</span> <span class="o">=</span> <span class="s1">&#39;2017-01-25T03:00:00&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Generate ensembles and reconstruct gaps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">restore</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s1">&#39;output.nc&#39;</span><span class="p">,</span> <span class="n">min_lon</span><span class="o">=</span><span class="n">min_lon</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">max_lon</span><span class="o">=</span><span class="n">max_lon</span><span class="p">,</span> <span class="n">min_lat</span><span class="o">=</span><span class="n">min_lat</span><span class="p">,</span> <span class="n">max_lat</span><span class="o">=</span><span class="n">max_lat</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">time</span><span class="o">=</span><span class="n">time_point</span><span class="p">,</span> <span class="n">uncertainty_quant</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">num_ensembles</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">ratio_num_modes</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">kernel_width</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">scale_error</span><span class="o">=</span><span class="mf">0.08</span><span class="p">,</span> <span class="n">detect_land</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fill_coast</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">write_ensembles</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="../api.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">API Reference</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="restoreio.scan.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">restoreio.scan</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>


    <!-- Adobe Embed API -->
    
    <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>


  </body>
</html>